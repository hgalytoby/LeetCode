Premium

### Python
```py
class Solution:
    def delayedCount(self, nums: List[int], k: int) -> List[int]:
        n = len(nums)
        count = Counter()
        result = [0] * n
        j = n - 1
        for i in range(n - 1, -1, -1):
            while j > i + k:
                count[nums[j]] += 1
                j -= 1
            result[i] = count[nums[i]]
        return result
```

```py
class Solution:
    def delayedCount(self, nums: List[int], k: int) -> List[int]:
        n = len(nums)
        hash_map = defaultdict(int)
        queue = deque()
        result = []
        for count, i in enumerate(range(n - 1, -1, -1)):
            if count > k:
                hash_map[queue.popleft()] += 1
            result.append(hash_map[nums[i]])
            queue.append(nums[i])
        return result[::-1]
```